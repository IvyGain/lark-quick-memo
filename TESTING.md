# 初回起動テストガイド

## 🧪 テスト目的
新規ユーザーの初回起動体験をテストし、言語選択とオンボーディングフローが適切に動作することを確認します。

## 📋 テスト準備

### 1. 現在の設定をバックアップ（必要に応じて）
```bash
# Raycastの拡張設定を確認
open ~/Library/Preferences/com.raycast.macos.plist
```

### 2. 拡張機能をリロード
```bash
# 開発モードで起動
npm run dev
```

## 🔄 初回起動状態の再現方法

### 方法A: 拡張内でのデータクリア（推奨）
1. Lark Quick Memo拡張を起動
2. 設定確認中画面で「🧪 テスト: データクリア」をクリック
3. または設定オプション画面で「🧪 テスト: データクリア」をクリック
4. 自動的にリロードされ、初回起動状態になります

### 方法B: 手動でのクリア
1. **LocalStorageをクリア**:
   ```bash
   # Raycastを完全終了
   killall Raycast
   
   # LocalStorageの場所（参考）
   # ~/Library/Application Support/com.raycast.macos/extensions/
   ```

2. **Extension Preferencesをクリア**:
   - Raycast設定 → Extensions → Lark Quick Memo → Reset

## 📝 テストシナリオ

### シナリオ1: 日本語での初回セットアップ
1. 拡張を起動
2. 言語選択画面で「日本語」を選択
3. ウェルカム画面の内容確認
4. 各ステップで日本語表示を確認
5. オンボーディング完了まで進む

### シナリオ2: 英語での初回セットアップ
1. データをクリア
2. 拡張を起動
3. 言語選択画面で「English」を選択
4. 各画面で英語表示を確認
5. オンボーディング完了まで進む

### シナリオ3: 言語変更テスト
1. 日本語でセットアップ開始
2. 途中で戻って言語を変更
3. UI表示が適切に切り替わることを確認

## ✅ 確認ポイント

### 言語選択画面
- [ ] 国旗アイコンが表示される
- [ ] 日本語・英語両方の選択肢がある
- [ ] 選択後に適切な言語で次画面が表示される

### ウェルカム画面
- [ ] 機能説明が選択言語で表示される
- [ ] セットアップフローの説明が正確
- [ ] ボタンテキストが適切にローカライズされている

### Larkアプリ作成ガイド
- [ ] 手順が選択言語で表示される
- [ ] URLリンクが正しく表示される
- [ ] ステップ説明が理解しやすい

### 設定フォーム
- [ ] フィールドラベルがローカライズされている
- [ ] プレースホルダーテキストが適切
- [ ] ヘルプテキストが正確に翻訳されている

### 接続テスト
- [ ] テスト中メッセージが適切な言語で表示
- [ ] 成功/失敗メッセージが正しくローカライズ
- [ ] テストメッセージ内容が適切な言語

### 完了画面
- [ ] 使用方法の説明が明確
- [ ] 全ての指示が選択言語で表示

## 🚨 既知の制限事項

1. **Extension Preferences**: Raycast標準のPreferences画面は英語のまま
2. **エラーメッセージ**: 一部のシステムエラーは英語で表示される可能性
3. **リロード**: データクリア後は手動での拡張再起動が必要な場合

## 🔧 デバッグ機能

拡張内に以下のデバッグ機能を追加しています：

- **🧪 テスト: データクリア**: 全ての保存データをクリアして初回起動状態に戻す
- **📊 設定確認**: 現在の設定状態をコンソールに出力

## 📊 テスト結果記録

テスト実行時は以下を記録してください：

- 選択した言語
- 発生した問題（あれば）
- UI表示の不具合
- 翻訳の不自然さ
- ユーザビリティの問題

## 🆘 トラブルシューティング

### 問題: 言語選択画面が表示されない
- データクリア機能を使用
- Raycastを完全再起動
- `npm run dev` でリビルド

### 問題: 翻訳が反映されない
- ブラウザのデベロッパーコンソールでエラー確認
- LocalStorageの `preferred-language` 値を確認

### 問題: 設定がクリアされない
- Raycast Preferences で手動リセット
- 拡張を無効化→有効化